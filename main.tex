
\documentclass{beamer}
\usepackage{amsmath,amssymb} % cho \varnothing
\setbeamerfont{math text}{size=\scriptsize}
\setbeamerfont{math text displayed}{size=\scriptsize}
\title{Tính toán tối ưu quá trình chuyển đổi đội hình trong trình diễn ánh sáng}
\author{Vũ Đức Lương \\
    \small Giảng viên hướng dẫn: TS. Nguyễn Hoàng Quân}
\institute{Viện Công Nghệ Hàng Không Vũ Trụ}
\date{15/12/2025}

% ---- Logo mọi slide ----
\setbeamertemplate{headline}{
  \begin{beamercolorbox}[wd=\paperwidth,ht=1.2cm,dp=0.2cm]{}
    \hspace{0.3cm}
    \includegraphics[height=1cm]{logo-uet.jpg}
    \hfill
    {\Large\bfseries \insertsection}
    \hfill
    \includegraphics[height=1cm]{logo-sae.jpg}
    \hspace{0.3cm}
  \end{beamercolorbox}
}


\begin{document}

\frame{\titlepage}

\begin{frame}
\frametitle{Nội dung đồ án}
   \begin{itemize}
        \item Tổng quan
        \item Cơ sở lý thuyết
        \item Triển khai thuật toán quy hoạch đường đi trên GPU
        \item Mô phỏng và phân tích kết quả
        \item Kết luận và hướng phát triển
    \end{itemize}
\end{frame}
\section{Tổng quan}


\begin{frame}
\frametitle{Giới thiệu}
\small
\begin{itemize}
    \item Trong những năm gần đây, trình diễn ánh sáng bằng drone đã trở thành xu hướng mới trong các sự kiện lớn. Công nghệ này sử dụng các UAV bay theo đội hình để tạo hiệu ứng ánh sáng ấn tượng, có tính linh hoạt cao, an toàn và thân thiện với môi trường, dần thay thế pháo hoa truyền thống.
    \item Công nghệ này thu hút sự quan tâm của các công ty lớn như Intel, Ehang, Damoda với các màn trình diễn quy mô lớn.
\end{itemize}
\vspace{0.3cm}

% ----- 3 ảnh phía dưới -----
\begin{columns}
    \column{0.33\textwidth}
    \centering
    \includegraphics[width=\linewidth]{intel.jpg}

    \column{0.3\textwidth}
    \centering
    \includegraphics[width=\linewidth]{ehang.jpg}

    \column{0.33\textwidth}
    \centering
    \includegraphics[width=\linewidth]{damoda.jpg}
\end{columns}
\end{frame}

\begin{frame}
\frametitle{Phần cứng drone trình diễn}

\footnotesize

\begin{columns}[T]
    % ===== CỘT TRÁI =====
    \column{0.48\textwidth}
    \begin{itemize}
        \item Drone trình diễn ánh sáng thường sử dụng quadrotor do chi phí thấp và cấu trúc linh hoạt, gồm bộ điều khiển trung tâm tích hợp LED, khung sợi carbon và bốn cụm động cơ [1].
        \item Drone không thể đổi hướng và tốc độ tức thì; quỹ đạo bay phải tuân theo giới hạn vận tốc và gia tốc để đảm bảo an toàn và tính thẩm mỹ.
    \end{itemize}

    % ===== CỘT PHẢI =====
    \column{0.52\textwidth}
    \begin{center}
        \vspace{-0.5cm}

        % ẢNH
        \includegraphics[
            width=\linewidth,
            height=0.32\textheight,
            keepaspectratio
        ]{hinh1-2.png}

        \vspace{0.15cm}

        % BẢNG
        \resizebox{\linewidth}{!}{
        \begin{tabular}{|p{2.8cm}|p{3.2cm}|p{3.2cm}|}
            \hline
            \textbf{Thông số} & \textbf{Collmot [2]} & \textbf{Damoda L3 [3]} \\ \hline
            Loại & Quadrotor & Quadrotor \\ \hline
            Trọng lượng & $< 2$ kg & 530 g \\ \hline
            Kích thước & $\varnothing < 100$ cm, cao $\sim$30 cm & $\varnothing$ 320 mm, cao 115 mm \\ \hline
            Thời gian bay & 10--12 phút & 20--25 phút \\ \hline
            Tốc độ tối đa & 6 m/s & 10 m/s \\ \hline
            Độ cao tối đa & 120 m & 120 m \\ \hline
            Khoảng cách tối thiểu & 7 m & 1.4 m \\ \hline
        \end{tabular}
        }
    \end{center}
\end{columns}
\vspace{0.1cm}
{\tiny
[1] Huang, Jie, Guoqing Tian, Jiancheng Zhang, and Yutao Chen, ”On Unmanned Aerial Vehicles Light Show Systems: Algorithms, Software and Hardware” Applied Sciences, 2021, Vol 11, no. 16. 


[2] CollMot Robotics Ltd., ”CollMot multi drone show spec tech”.  

[3] Shenzhen DAMODA Intelligent Control Technology Co., Ltd, ”Light show Drone L3”. 
}
\end{frame}
\begin{frame}
\frametitle{\small Triển khai hệ thống trong thực tế}
\footnotesize

\begin{columns}[T]
    % ===== CỘT TRÁI =====
    \column{0.52\textwidth}
    Triển khai các hệ thống drone trình diễn ánh sáng chế độ điều khiển bán tự động được sử dụng phổ biến do chế độ điều khiển tự động yêu cầu các cảm biến và khả năng tính toán của bộ điều khiển
    bay ở mỗi drone phải có độ chính xác cao. Trong khi đó chế độ điều khiển thủ công lại có tính rủi ro cao khi trình diễn số lượng drone quy mô lớn do có thể gặp lỗi truyền thông giữa các UAV và 
    trạm mặt đất cũng như khả năng điều khiển của phi công.

    \vspace{0.2 cm}
    \fontsize{5}{6}\selectfont{
        [1] Huang, Jie, Guoqing Tian, Jiancheng Zhang, and Yutao Chen, ”On Unmanned Aerial Vehicles Light Show Systems: Algorithms, Software and Hardware” Applied Sciences, 2021, Vol 11, no. 16. 

        [4] H.Sun, J.Qi, M.Wang, ”Path Planning for Dense Drone Formation Based on Modiefield Aritificial Potential Field”, Proceedings of 39th Chinese Control Conference, Shenyang, China, 2020, pp.4658-4664. 
    }


\column{0.48\textwidth}
\begin{center}
\vspace{-0.4cm}

% ===== KHỐI ẢNH =====
    \begin{minipage}[T]{0.48\linewidth}
    % Ảnh lớn bên trái
        \includegraphics[width=\linewidth]{hinh1-3.jpg}
    \end{minipage}
    \hfill
    \begin{minipage}[T]{0.48\linewidth}
    % Ảnh nhỏ trên
        \vspace{-0.6cm}   % ← ĐẨY CAO CẢ 2 ẢNH NHỎ
        \includegraphics[width=\linewidth]{hinh1-4.png}
        \vspace{0.25cm}

    % Ảnh nhỏ dưới
        \includegraphics[width=\linewidth]{hinh1-6.jpg}
\end{minipage}

\end{center}

\end{columns}

\end{frame}    
\begin{frame}
\frametitle{Mục tiêu đồ án}
\fontsize{10}{12}\selectfont
{Đồ án tập trung phát triển một công cụ giúp tính toán các waypoint các drone trong quá trình chuyển đổi đội hình với đầu vào là các đội hình được thiết kế sẵn
dựa trên hai thuật toán: 
\begin{itemize}
\item Thuật toán Hungarian giúp các drone được gán vào các mục tiêu tối ưu sao cho tổng quãng đường đi là nhỏ nhất.
\item Thuật thoán trường thế năng nhân tạo đã được cải tiến giúp các drone không va chạm trong quá trình chuyển đổi cũng như đảm bảo các yêu cầu về mặt động học.Ngoài ra thành phần tính toán lực tổng hợp của thuật toán cũng sẽ được triển khai tính toán trên GPU thông
qua PyOpenCL giúp tăng tốc thuật toán quy hoạch đường đi trong trường hợp mô phỏng với số lượng drone lớn.
\end{itemize}
Các thuật toán được thực hiện theo hướng lập kế hoạch offline (tính toán từ trước sau đó triển khai) và được kiểm chứng thông qua mô phỏng.}

\vspace{0.1 cm}
\tiny{
    [4] H.Sun, J.Qi, M.Wang, ”Path Planning for Dense Drone Formation Based on Modiefield Aritificial Potential Field”, Proceedings of 39th Chinese Control Conference, Shenyang, China, 2020, pp.4658-4664. 

    [5] D. Nar and R. Kotecha, “Optimal Waypoint Assignment for Designing Drone Light Show Formations”, Results Control Optimal, 2022, vol. 9, p. 100174.
    }
\end{frame}
\section{Cơ sở lý thuyết}
\begin{frame}[shrink=10]
\frametitle{Mô tả bài toán}
\scriptsize
\begin{columns}[T]
% ===== CỘT TRÁI =====
\column{0.35\textwidth}
Trong không gian 3D, mỗi drone được xem như là một vật rắn và vị trí của nó
được đại diện bởi $\textbf{p}_i = (x_i, y_i, z_i)$.

    Vị trí đội hình bắt đầu:
    \begin{equation}
        \textbf{P}_S =
        [\textbf{p}^s_1, \textbf{p}^s_2, \ldots, \textbf{p}^s_{n-1}, \textbf{p}^s_n]
    \end{equation}

    Vị trí đội hình tại thời điểm $t$:
    \begin{equation}
        \textbf{P}_t =
        [\textbf{p}^t_1, \textbf{p}^t_2, \ldots, \textbf{p}^t_{n-1}, \textbf{p}^t_n]
    \end{equation}

    Vị trí đội hình mục tiêu:
    \begin{equation}
        \textbf{P}_e =
        [\textbf{p}^e_1, \textbf{p}^e_2, \ldots, \textbf{p}^e_{n-1}, \textbf{p}^e_n]
    \end{equation}
\column{0.65\textwidth}
    \scriptsize

    Ma trận phân công nhiệm vụ S.
    \begin{equation}
    \textbf{S} = 
    \begin{bmatrix}
        s_{1,1} & s_{1,2} & \cdots & s_{1,n-1} & s_{1,n} \\
        s_{2,1} & s_{2,2} & \cdots & s_{2,n-1} & s_{2,n} \\
        \vdots  & \vdots  & \ddots & \vdots     & \vdots  \\
        s_{n-1,1} & s_{n-1,2} & \cdots & s_{n-1,n-1} & s_{n-1,n} \\
            s_{n,1} & s_{n,2} & \cdots & s_{n,n-1} & s_{n,n}
    \end{bmatrix}
    \end{equation}
    

    Khi nhiệm vụ i được phân công cho drone j thì $s_{i,j} = 1$ ngược lại thì $s_{i,j} = 0$, mục tiêu của bài toán phân công đội hình là nhằm tối thiểu hóa tổng 
    chi phí phân công và mỗi drone i chỉ được phân công cho một nhiệm vụ j. 
    \vspace{-0.2 cm}
    \begin{equation}
      \text{min}\sum_{i=1}^n \sum_{j=1}^n s_{i,j} d_{i,j}
    \end{equation}
    \vspace{-0.2 cm}
    \begin{equation}
    \left\{
    \begin{aligned}
        \sum_{j=1}^n s_{i,j} &= 1, \quad 1 \leq i \leq n \\[10pt]
        \sum_{i=1}^n s_{i,j} &= 1, \quad 1 \leq j \leq n
    \end{aligned}
    \right.
    \end{equation}
\end{columns}

\end{frame}

\begin{frame}
    \frametitle{Áp dụng thuật toán Hungarian}
    Thuật toán Hungarian có độ phức tạp $O(n^3)$ được áp dụng với đầu vào là mảng vị trí bắt đầu các drone và vị trí các mục tiêu từ thiết kế và đầu ra là ánh xạ giữa drone và mục tiêu

    \centering
    \includegraphics[
     width=0.8\linewidth,
     height=0.7\textheight,
     keepaspectratio
]{hungarian.png}
\end{frame}
\begin{frame}
\frametitle{Thuật toán trường thế năng nhân tạo}

\scriptsize

\textbf{Trường thế hấp dẫn}
\begin{equation}
U_{\text{att}_i}
= \frac{1}{2}\,\varepsilon
\left\| \mathbf{p}^e_i - \mathbf{p}^t_i \right\|^{2}
\end{equation}

\vspace{0.2cm}

\textbf{Trường thế đẩy}
\begin{equation}
U_{\text{rep}_{i,O}} =
\begin{cases}
\displaystyle
\frac{1}{2}\,\eta
\left(
\frac{1}{\left\| \mathbf{p}^t_i - \mathbf{p}^t_O \right\|}
- \frac{1}{\rho}
\right)^{2},
& \text{nếu } \left\| \mathbf{p}^t_i - \mathbf{p}^t_O \right\| \le \rho, \\[6pt]
0,
& \text{nếu } \left\| \mathbf{p}^t_i - \mathbf{p}^t_O \right\| > \rho.
\end{cases}
\end{equation}
\textbf{Trường thế tổng hợp}
\begin{equation}
    U_{res_i}= U_{att_i} + \sum_{O=1}^m U_{rep_{i,O}}
\end{equation}
\textbf{Lực tổng hợp}
\begin{equation}
    \textbf{F}_{res_i} = -\nabla{U_{res_i}}.
\end{equation}
\tiny {
    O. Khatib, ”Real-time obstacle avoidance for manipulators and mobile robots”,Proceedings. 1985 IEEE International Conference on Robotics and Automation,1985.
}
\end{frame}
\begin{frame}
\frametitle{Thuật toán trường thế năng nhân tạo}
Sau khi tính toán được lực tổng hợp có thể tính toán các waypoint trong quá trình trình drone di chuyển ở bước lặp tiếp theo bằng cách dịch một khoảng $\lambda$ theo hướng lực tính toán được
\vspace{-0.2 cm}
\scriptsize
\begin{equation}
    \textbf{p}^{t+1}_i = \textbf{p}^t_i + \lambda \cdot \frac{\textbf{F}^t_{res_i}}{\|\textbf{F}^t_{res_i}\|}
\end{equation}
\centering
\includegraphics[
width=0.6\linewidth,
height=0.6\textheight,
keepaspectratio
]{hinh2-1.png}
\end{frame}

\begin{frame}
\frametitle{Thuật toán trường thế năng nhân tạo cải tiến cho drone trình diễn ánh sáng}

\begin{columns}[T]

% ===== CỘT TRÁI =====
\column{0.7\textwidth}
\scriptsize

\textbf{Bước nhảy ràng buộc động học}
\begin{equation}
{\scriptsize
\lambda =
\begin{cases}
\sqrt{2ad_{\min}}\cdot T, & d_{\min} \le \dfrac{v_{\max}^2}{2a} \\
v_{\max}\cdot T, & \text{ngược lại}
\end{cases}}
\end{equation}

\begin{equation}
{\scriptsize
d_{\min}
=
\min\!\left(
\|\mathbf{p}_i^s-\mathbf{p}_i^t\|,
\|\mathbf{p}_i^e-\mathbf{p}_i^t\|,
\|\mathbf{p}_O^t-\mathbf{p}_i^t\|
\right)}
\end{equation}

\textbf{Trường thế đẩy phân lớp}
\begin{equation}
{\scriptsize
U_{\text{rep},o} =
\begin{cases}
\frac{1}{2}\eta_1\!\left( \frac{1}{\|\mathbf{p}_o^t-\mathbf{p}_i^t\|} - \frac{1}{\rho_1} \right)^2,
& \|\mathbf{p}_o^t-\mathbf{p}_i^t\| \le \rho_1 \\[4pt]

\frac{1}{2}\eta_2\!\left( \frac{1}{\|\mathbf{p}_o^t-\mathbf{p}_i^t\|} - \frac{1}{\rho_2} \right)^2,
& \rho_1 < \|\mathbf{p}_o^t-\mathbf{p}_i^t\| \le \rho_2 \\[4pt]

0, & \|\mathbf{p}_o^t-\mathbf{p}_i^t\| > \rho_2
\end{cases}}
\end{equation}

% ===== CỘT PHẢI =====
\column{0.38\textwidth}
\centering

\includegraphics[
  width=\linewidth,
  height=\textheight,
  keepaspectratio
]{hinh2-2.png}

\vspace{0.2cm}

\includegraphics[
  width=\linewidth,
  height=\textheight,
  keepaspectratio
]{hinh2-3.png}

\end{columns}
\end{frame}
\end{document}
